PROJECT_TARGET ?= stm32f446ret
PROJECT_C_SOURCES = $(wildcard Src/*.c)
PROJECT_C_INCLUDES = Inc
PROJECT_BUILD_DIR = ../build

DRIVERS_DIR = ../Drivers

MAKEFILE_DIR := $(shell dirname $(realpath $(lastword $(MAKEFILE_LIST))))

default: all

%:
	$(MAKE) -C $(DRIVERS_DIR) $(MAKECMDGOALS) \
				PROJECT_TARGET=$(PROJECT_TARGET) \
				PROJECT_C_SOURCES=$(MAKEFILE_DIR)/$(PROJECT_C_SOURCES) \
				PROJECT_C_INCLUDES=$(MAKEFILE_DIR)/$(PROJECT_C_INCLUDES) \
				PROJECT_BUILD_DIR=$(MAKEFILE_DIR)/$(PROJECT_BUILD_DIR)
